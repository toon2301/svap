(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[364],{6447:function(e,a,s){Promise.resolve().then(s.bind(s,4356))},4356:function(e,a,s){"use strict";s.d(a,{default:function(){return d}});var t=s(7437),r=s(2265),o=s(429),i=s(9376),n=s(1837);let l=(0,r.lazy)(()=>Promise.all([s.e(979),s.e(187)]).then(s.bind(s,6187)));function d(){let e=(0,i.useRouter)(),a=(0,i.useParams)(),s=a.uidb64,d=a.token,[c,m]=(0,r.useState)({password:"",confirmPassword:""}),[u,h]=(0,r.useState)({}),[p,x]=(0,r.useState)(!1),[b,f]=(0,r.useState)(!1),[y,v]=(0,r.useState)(!0),[g,w]=(0,r.useState)("");(0,r.useEffect)(()=>{let e=async()=>{try{(await n.hi.get("/auth/password-reset-verify/".concat(s,"/").concat(d,"/"))).data.valid||w("Token je neplatn\xfd alebo expiroval"),v(!1)}catch(e){w("Chyba pri overovan\xed tokenu"),v(!1)}};s&&d?e():(w("Neplatn\xfd odkaz"),v(!1))},[s,d]);let j=e=>{let{name:a,value:s}=e.target;m(e=>({...e,[a]:s})),u[a]&&h(e=>({...e,[a]:void 0}))},N=()=>{let e={};return c.password?c.password.length<8?e.password="Heslo mus\xed mať aspoň 8 znakov":/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(c.password)||(e.password="Heslo mus\xed obsahovať veľk\xe9 p\xedsmeno, mal\xe9 p\xedsmeno a č\xedslo"):e.password="Heslo je povinn\xe9",c.confirmPassword?c.password!==c.confirmPassword&&(e.confirmPassword="Hesl\xe1 sa nezhoduj\xfa"):e.confirmPassword="Potvrdenie hesla je povinn\xe9",h(e),0===Object.keys(e).length},k=async a=>{if(a.preventDefault(),N()){x(!0),h({});try{let a=await n.hi.post("/auth/password-reset/".concat(s,"/").concat(d,"/"),{password:c.password,confirm_password:c.confirmPassword});200===a.status&&(f(!0),setTimeout(()=>{e.push("/login")},2e3))}catch(e){var t,r,o,i,l;if(console.error("Reset password error:",e),null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.errors){let a=e.response.data.errors;h({general:(null===(o=a.non_field_errors)||void 0===o?void 0:o[0])||"Chyba pri zmene hesla",password:null===(i=a.password)||void 0===i?void 0:i[0],confirmPassword:null===(l=a.confirm_password)||void 0===l?void 0:l[0]})}else h({general:"Chyba pri zmene hesla. Sk\xfaste to znovu."})}finally{x(!1)}}};return y?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Overujem token..."})]})}):g?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-red-500 text-6xl mb-4",children:"⚠️"}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Neplatn\xfd odkaz"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:g}),(0,t.jsx)("button",{onClick:()=>e.push("/forgot-password"),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Požiadať o nov\xfd odkaz"})]})}):b?(0,t.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:[(0,t.jsx)(r.Suspense,{fallback:(0,t.jsx)("div",{children:"Loading..."}),children:(0,t.jsx)(l,{})}),(0,t.jsx)("div",{className:"relative z-10 text-center",children:(0,t.jsxs)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"bg-white p-8 rounded-2xl shadow-xl max-w-md mx-4",children:[(0,t.jsx)(o.E.div,{initial:{scale:0},animate:{scale:1},transition:{duration:.5,delay:.2},className:"text-green-500 text-6xl mb-4",children:"✅"}),(0,t.jsx)(o.E.h1,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.4},className:"text-2xl font-bold text-gray-900 mb-4",children:"Heslo \xfaspešne zmenen\xe9!"}),(0,t.jsx)(o.E.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.6},className:"text-gray-600 mb-6",children:"Vaše heslo bolo \xfaspešne zmenen\xe9. Budete presmerovan\xed na prihlasovaciu str\xe1nku."}),(0,t.jsx)(o.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.8},className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"})]})})]}):(0,t.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:[(0,t.jsx)(r.Suspense,{fallback:(0,t.jsx)("div",{children:"Loading..."}),children:(0,t.jsx)(l,{})}),(0,t.jsx)("div",{className:"relative z-10 w-full max-w-md mx-4",children:(0,t.jsxs)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"bg-white p-8 rounded-2xl shadow-xl",children:[(0,t.jsxs)(o.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.2},className:"text-center mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Zmena hesla"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Zadajte nov\xe9 heslo pre v\xe1š \xfačet"})]}),u.general&&(0,t.jsx)(o.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,t.jsx)("p",{className:"text-red-600 text-sm",children:u.general})}),(0,t.jsxs)("form",{onSubmit:k,className:"space-y-6",children:[(0,t.jsxs)(o.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.3},children:[(0,t.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Nov\xe9 heslo"}),(0,t.jsx)("input",{type:"password",id:"password",name:"password",value:c.password,onChange:j,className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ".concat(u.password?"border-red-300 bg-red-50":"border-gray-300"),placeholder:"Zadajte nov\xe9 heslo",disabled:p}),u.password&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:u.password})]}),(0,t.jsxs)(o.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.4},children:[(0,t.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Potvrdenie hesla"}),(0,t.jsx)("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:c.confirmPassword,onChange:j,className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ".concat(u.confirmPassword?"border-red-300 bg-red-50":"border-gray-300"),placeholder:"Potvrďte nov\xe9 heslo",disabled:p}),u.confirmPassword&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:u.confirmPassword})]}),(0,t.jsx)(o.E.button,{type:"submit",disabled:p,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.5},className:"w-full py-3 px-4 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:p?(0,t.jsxs)("div",{className:"flex items-center justify-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Men\xedm heslo..."]}):"Zmeniť heslo"})]}),(0,t.jsx)(o.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.6},className:"mt-6 text-center",children:(0,t.jsx)("button",{onClick:()=>e.push("/login"),className:"text-blue-600 hover:text-blue-700 text-sm font-medium transition-colors",children:"Sp\xe4ť na prihl\xe1senie"})})]})})]})}},1837:function(e,a,s){"use strict";s.d(a,{Hv:function(){return n},hi:function(){return i}});var t=s(3464),r=s(4131);let o="http://192.168.68.103:8000/api",i=t.Z.create({baseURL:o,headers:{"Content-Type":"application/json"},timeout:3e4});i.interceptors.request.use(e=>{let a=r.Z.get("access_token");return a&&(e.headers.Authorization="Bearer ".concat(a)),e},e=>Promise.reject(e)),i.interceptors.response.use(e=>e,async e=>{var a;let s=e.config;if((null===(a=e.response)||void 0===a?void 0:a.status)===401&&!s._retry){s._retry=!0;try{let e=r.Z.get("refresh_token");if(e){let{access:a}=(await t.Z.post("".concat(o,"/token/refresh/"),{refresh:e})).data;return r.Z.set("access_token",a),s.headers.Authorization="Bearer ".concat(a),i(s)}}catch(e){r.Z.remove("access_token"),r.Z.remove("refresh_token"),window.location.href="/auth/login"}}return Promise.reject(e)});let n={auth:{login:"/auth/login/",register:"/auth/register/",refresh:"/token/refresh/",logout:"/auth/logout/",me:"/auth/me/",verifyEmail:"/auth/verify-email/",resendVerification:"/auth/resend-verification/",oauthCallback:"/oauth/callback/",googleLoginUrl:"/oauth/google/login-url/"},dashboard:{home:"/dashboard/home/",search:"/dashboard/search/",favorites:"/dashboard/favorites/",profile:"/dashboard/profile/",settings:"/dashboard/settings/"}}}},function(e){e.O(0,[428,825,971,117,744],function(){return e(e.s=6447)}),_N_E=e.O()}]);