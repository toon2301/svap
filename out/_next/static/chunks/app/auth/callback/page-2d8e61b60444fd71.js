(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[453],{4943:function(e,r,s){Promise.resolve().then(s.bind(s,9838))},9376:function(e,r,s){"use strict";var o=s(5475);s.o(o,"useParams")&&s.d(r,{useParams:function(){return o.useParams}}),s.o(o,"useRouter")&&s.d(r,{useRouter:function(){return o.useRouter}}),s.o(o,"useSearchParams")&&s.d(r,{useSearchParams:function(){return o.useSearchParams}})},9838:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return c},dynamic:function(){return a}});var o=s(7437),n=s(2265),t=s(9376);let a="force-dynamic";function l(){let e=(0,t.useSearchParams)(),[r,s]=(0,n.useState)("loading"),[a,l]=(0,n.useState)("");return(0,n.useEffect)(()=>{(async()=>{let r=e.get("token"),o=e.get("refresh_token"),n=e.get("user_id"),t=e.get("error");if(console.log("OAuth callback page loaded"),console.log("Full URL:",window.location.href),console.log("Search params:",e.toString()),console.log("Token:",r?"".concat(r.substring(0,20),"..."):"null"),console.log("Refresh token:",o?"".concat(o.substring(0,20),"..."):"null"),console.log("User ID:",n),console.log("Error:",t),t){console.error("OAuth error from URL:",t),l("OAuth prihl\xe1senie zlyhalo: ".concat(t)),s("error"),window.opener&&(console.log("Sending error message to parent window"),window.opener.postMessage({type:"OAUTH_ERROR",error:"OAuth prihl\xe1senie zlyhalo: ".concat(t)},"*")),setTimeout(()=>{window.close()},3e3);return}if(!r||!o){console.error("Missing tokens"),l("Ch\xfdbaj\xfa tokeny z Google prihl\xe1senia"),s("error"),window.opener&&window.opener.postMessage({type:"OAUTH_ERROR",error:"Ch\xfdbaj\xfa tokeny z Google prihl\xe1senia"},"*"),setTimeout(()=>{window.close()},3e3);return}try{console.log("Preparing tokens for parent window...");let e={access:r,refresh:o};console.log("Storing tokens and closing popup..."),localStorage.setItem("access_token",e.access),localStorage.setItem("refresh_token",e.refresh),localStorage.setItem("oauth_success","true"),console.log("Tokens stored in localStorage, closing popup..."),setTimeout(()=>{console.log("Closing popup window..."),window.close()},1e3),s("success")}catch(r){console.error("OAuth callback error:",r);let e=r.message||"Chyba pri uložen\xed tokenov";l(e),s("error"),console.log("Sending error message to parent window:",e),window.opener&&window.opener.postMessage({type:"OAUTH_ERROR",error:e},"*"),setTimeout(()=>{window.close()},3e3)}})()},[e]),(0,o.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full mx-4",children:["loading"===r&&(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"}),(0,o.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Prihlasujem v\xe1s..."}),(0,o.jsx)("p",{className:"text-gray-600",children:"Pros\xedm počkajte, spracov\xe1vam vaše prihl\xe1senie."})]}),"success"===r&&(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,o.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,o.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"\xdaspešne prihl\xe1sen\xfd!"}),(0,o.jsx)("p",{className:"text-gray-600",children:"Zatv\xe1ram okno a presmerov\xe1vam v\xe1s na dashboard..."})]}),"error"===r&&(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,o.jsx)("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,o.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Chyba pri prihl\xe1sen\xed"}),(0,o.jsx)("p",{className:"text-gray-600 mb-4",children:a}),(0,o.jsx)("button",{onClick:()=>window.close(),className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Zatvoriť okno"})]})]})})}function c(){return(0,o.jsx)(n.Suspense,{fallback:(0,o.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,o.jsx)("p",{className:"text-gray-600",children:"Nač\xedtavam..."})]})}),children:(0,o.jsx)(l,{})})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=4943)}),_N_E=e.O()}]);