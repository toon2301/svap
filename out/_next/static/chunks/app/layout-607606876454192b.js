(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{9020:function(e,t,r){Promise.resolve().then(r.t.bind(r,7438,23)),Promise.resolve().then(r.t.bind(r,2778,23)),Promise.resolve().then(r.bind(r,7180)),Promise.resolve().then(r.bind(r,3285)),Promise.resolve().then(r.bind(r,4367)),Promise.resolve().then(r.bind(r,9211))},7180:function(e,t,r){"use strict";r.d(t,{default:function(){return i}});var o=r(7437),s=r(166);let a=(0,s.default)(()=>r.e(370).then(r.bind(r,370)),{loadableGenerated:{webpack:()=>[370]},ssr:!1}),n=(0,s.default)(()=>r.e(915).then(r.bind(r,5915)),{loadableGenerated:{webpack:()=>[5915]},ssr:!1});function i(){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a,{}),(0,o.jsx)(n,{})]})}},3285:function(e,t,r){"use strict";var o=r(7437),s=r(2265),a=r(429);class n extends s.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t),this.setState({error:e,errorInfo:t})}componentDidUpdate(e){e.children!==this.props.children&&this.state.hasError&&this.setState({hasError:!1,error:void 0,errorInfo:void 0})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:(0,o.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,o.jsx)(a.E.div,{className:"max-w-md w-full space-y-8 bg-white p-10 rounded-xl shadow-lg",initial:{opacity:0,y:-50},animate:{opacity:1,y:0},transition:{duration:.5},children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)(a.E.div,{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},children:(0,o.jsx)("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,o.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Oops! Niečo sa pokazilo"}),(0,o.jsx)("p",{className:"text-gray-600 mb-6",children:"Došlo k neočak\xe1vanej chybe. Sk\xfaste obnoviť str\xe1nku alebo sa vr\xe1ťte na hlavn\xfa str\xe1nku."}),!1,(0,o.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[(0,o.jsx)(a.E.button,{onClick:this.handleRetry,className:"px-6 py-3 bg-purple-600 text-white font-semibold rounded-lg hover:bg-purple-700 transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Sk\xfasiť znovu"}),(0,o.jsx)(a.E.button,{onClick:()=>window.location.href="/",className:"px-6 py-3 bg-gray-600 text-white font-semibold rounded-lg hover:bg-gray-700 transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Domov"})]})]})})}):this.props.children}constructor(e){super(e),this.handleRetry=()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0})},this.state={hasError:!1}}}t.default=n},4367:function(e,t,r){"use strict";r.d(t,{Providers:function(){return h}});var o=r(7437),s=r(3427),a=r(9827),n=r(3204),i=r(9064),l=r(2265),c=r(9376);let d=(0,l.createContext)(void 0);function u(e){let{children:t}=e,[r,s]=(0,l.useState)(null),[a,n]=(0,l.useState)(!0),i=(0,c.useRouter)();(0,l.useEffect)(()=>{(()=>{try{let e=localStorage.getItem("user"),t=localStorage.getItem("tokens");if(e&&t){let t=JSON.parse(e);s(t)}}catch(e){console.error("Error loading user from localStorage:",e),localStorage.removeItem("user"),localStorage.removeItem("tokens")}finally{n(!1)}})()},[]);let u=async(e,t)=>{try{let r=await fetch("".concat("http://192.168.68.103:8000/api","/auth/login/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}),o=await r.json();if(!r.ok)throw Error(o.message||"Prihl\xe1senie zlyhalo");let{user:a,tokens:n}=o;localStorage.setItem("user",JSON.stringify(a)),localStorage.setItem("tokens",JSON.stringify(n)),s(a),i.push("/dashboard")}catch(e){throw console.error("Login error:",e),e}},h=async e=>{try{let t=await fetch("".concat("http://192.168.68.103:8000/api","/auth/register/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await t.json();if(!t.ok)throw Error(r.message||"Registr\xe1cia zlyhala");i.push("/verify-email")}catch(e){throw console.error("Registration error:",e),e}},f=async()=>{try{let e=localStorage.getItem("tokens");if(!e)return;let{access:t}=JSON.parse(e),r=await fetch("".concat("http://192.168.68.103:8000/api","/profile/"),{headers:{Authorization:"Bearer ".concat(t)}});if(r.ok){let e=await r.json();s(e),localStorage.setItem("user",JSON.stringify(e))}}catch(e){console.error("Error refreshing user:",e)}};return(0,o.jsx)(d.Provider,{value:{user:r,isLoading:a,isAuthenticated:!!r,login:u,register:h,logout:()=>{localStorage.removeItem("user"),localStorage.removeItem("tokens"),s(null),i.push("/")},updateUser:e=>{if(r){let t={...r,...e};s(t),localStorage.setItem("user",JSON.stringify(t))}},refreshUser:f},children:t})}function h(e){let{children:t}=e,[r]=(0,l.useState)(()=>new s.S({defaultOptions:{queries:{staleTime:6e4,retry:(e,t)=>{var r,o;return(!((null==t?void 0:null===(r=t.response)||void 0===r?void 0:r.status)>=400)||!((null==t?void 0:null===(o=t.response)||void 0===o?void 0:o.status)<500))&&e<3}}}}));return(0,o.jsx)(a.aH,{client:r,children:(0,o.jsxs)(u,{children:[t,(0,o.jsx)(i.x7,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,iconTheme:{primary:"#10B981",secondary:"#fff"}},error:{duration:5e3,iconTheme:{primary:"#EF4444",secondary:"#fff"}}}}),(0,o.jsx)(n.t,{initialIsOpen:!1})]})})}},9211:function(e,t,r){"use strict";r.d(t,{LoadingProvider:function(){return n}});var o=r(7437),s=r(2265);let a=(0,s.createContext)(void 0);function n(e){let{children:t}=e,[r,n]=(0,s.useState)(!1),[l,c]=(0,s.useState)("Nač\xedtavam..."),d=(0,s.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Nač\xedtavam...";n(e),c(t)},[]),u=(0,s.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Nač\xedtavam...";n(!0),c(e)},[]),h=(0,s.useCallback)(()=>{n(!1)},[]);return(0,o.jsxs)(a.Provider,{value:{isLoading:r,loadingMessage:l,setLoading:d,startLoading:u,stopLoading:h},children:[t,(0,o.jsx)(i,{})]})}function i(){let{isLoading:e,loadingMessage:t}=function(){let e=(0,s.useContext)(a);if(void 0===e)throw Error("useLoading must be used within a LoadingProvider");return e}();return e?(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,o.jsx)("div",{className:"bg-white rounded-lg p-8 max-w-sm w-full mx-4 shadow-xl",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"mx-auto mb-4",children:(0,o.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"})}),(0,o.jsx)("p",{className:"text-gray-700 font-medium",children:t})]})})}):null}},2778:function(){}},function(e){e.O(0,[407,428,124,971,117,744],function(){return e(e.s=9020)}),_N_E=e.O()}]);