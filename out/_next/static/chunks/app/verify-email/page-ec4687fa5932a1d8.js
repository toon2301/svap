(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[476],{7121:function(e,r,t){Promise.resolve().then(t.bind(t,1725))},1725:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return u},dynamic:function(){return c}});var s=t(7437),a=t(2265),i=t(9376),n=t(429),o=t(1837),l=t(3106);let c="force-dynamic";function d(){let e=(0,i.useSearchParams)(),r=(0,i.useRouter)(),[t,c]=(0,a.useState)({status:"loading",message:"Overujem email..."});return(0,a.useEffect)(()=>{(async()=>{let t=e.get("token");if(!t){c({status:"error",message:"Chyba",error:"Ch\xfdba verifikačn\xfd token"});return}try{let e=await o.hi.post(o.Hv.auth.verifyEmail,{token:t});e.data.verified?e.data.tokens?((0,l.vD)({access:e.data.tokens.access,refresh:e.data.tokens.refresh}),c({status:"success",message:"Email bol \xfaspešne overen\xfd! Presmerov\xe1vam na dashboard..."}),setTimeout(()=>{r.push("/dashboard")},2e3)):c({status:"success",message:"Email bol \xfaspešne overen\xfd!"}):c({status:"error",message:"Chyba pri overovan\xed",error:e.data.error||"Nepodarilo sa overiť email"})}catch(r){var s,a,i,n,d;console.error("Verification error:",r);let e="Nepodarilo sa overiť email";(null===(a=r.response)||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.error)?e=r.response.data.error:(null===(d=r.response)||void 0===d?void 0:null===(n=d.data)||void 0===n?void 0:null===(i=n.details)||void 0===i?void 0:i.token)&&(e=r.response.data.details.token[0]),c({status:"error",message:"Chyba pri overovan\xed",error:e})}})()},[e]),(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:(0,s.jsxs)(n.E.div,{className:"bg-white rounded-2xl shadow-xl border border-gray-200 p-8 max-w-md w-full text-center",initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},children:[(0,s.jsx)(n.E.div,{className:"flex justify-center mb-6",initial:{scale:0},animate:{scale:1},transition:{duration:.5,delay:.2},children:(()=>{switch(t.status){case"loading":return(0,s.jsx)(n.E.div,{className:"w-16 h-16 border-4 border-purple-200 border-t-purple-600 rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}});case"success":return(0,s.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})});case"error":return(0,s.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})}})()}),(0,s.jsx)(n.E.h1,{className:"text-2xl font-semibold mb-4 ".concat((()=>{switch(t.status){case"success":return"text-green-600";case"error":return"text-red-600";default:return"text-purple-600"}})()),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:t.message}),"success"===t.status&&(0,s.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.6},children:[(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:"V\xe1š email bol \xfaspešne overen\xfd. Teraz sa m\xf4žete prihl\xe1siť do svojho \xfačtu."}),(0,s.jsx)("a",{href:"/dashboard",className:"inline-block bg-purple-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-purple-700 transition-colors",children:"Prejsť na dashboard"})]}),"error"===t.status&&(0,s.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.6},children:[(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:t.error}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("a",{href:"/register",className:"inline-block bg-purple-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-purple-700 transition-colors mr-3",children:"Registrovať sa znovu"}),(0,s.jsx)("a",{href:"/",className:"inline-block bg-gray-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-gray-700 transition-colors",children:"Sp\xe4ť na hlavn\xfa str\xe1nku"})]})]}),"loading"===t.status&&(0,s.jsx)(n.E.p,{className:"text-gray-600",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.6},children:"Pros\xedm počkajte, overujem v\xe1š email..."})]})})}function u(){return(0,s.jsx)(a.Suspense,{fallback:(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Nač\xedtavam..."})]})}),children:(0,s.jsx)(d,{})})}},1837:function(e,r,t){"use strict";t.d(r,{Hv:function(){return o},hi:function(){return n}});var s=t(3464),a=t(4131);let i="http://192.168.68.103:8000/api",n=s.Z.create({baseURL:i,headers:{"Content-Type":"application/json"},timeout:3e4});n.interceptors.request.use(e=>{let r=a.Z.get("access_token");return r&&(e.headers.Authorization="Bearer ".concat(r)),e},e=>Promise.reject(e)),n.interceptors.response.use(e=>e,async e=>{var r;let t=e.config;if((null===(r=e.response)||void 0===r?void 0:r.status)===401&&!t._retry){t._retry=!0;try{let e=a.Z.get("refresh_token");if(e){let{access:r}=(await s.Z.post("".concat(i,"/token/refresh/"),{refresh:e})).data;return a.Z.set("access_token",r),t.headers.Authorization="Bearer ".concat(r),n(t)}}catch(e){a.Z.remove("access_token"),a.Z.remove("refresh_token"),window.location.href="/auth/login"}}return Promise.reject(e)});let o={auth:{login:"/auth/login/",register:"/auth/register/",refresh:"/token/refresh/",logout:"/auth/logout/",me:"/auth/me/",verifyEmail:"/auth/verify-email/",resendVerification:"/auth/resend-verification/",oauthCallback:"/oauth/callback/",googleLoginUrl:"/oauth/google/login-url/"},dashboard:{home:"/dashboard/home/",search:"/dashboard/search/",favorites:"/dashboard/favorites/",profile:"/dashboard/profile/",settings:"/dashboard/settings/"}}},3106:function(e,r,t){"use strict";t.d(r,{$8:function(){return c},Je:function(){return l},vD:function(){return n}});var s=t(4131);let a="access_token",i="refresh_token",n=e=>{s.Z.set(a,e.access,{expires:1,secure:!0,sameSite:"strict"}),s.Z.set(i,e.refresh,{expires:7,secure:!0,sameSite:"strict"})},o=()=>s.Z.get(a),l=()=>{s.Z.remove(a),s.Z.remove(i)},c=()=>!!o()}},function(e){e.O(0,[428,825,971,117,744],function(){return e(e.s=7121)}),_N_E=e.O()}]);